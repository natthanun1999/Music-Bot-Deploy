(function(e){function t(t){for(var n,a,d=t[0],r=t[1],l=t[2],c=0,p=[];c<d.length;c++)a=d[c],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],n=!0,d=1;d<i.length;d++){var r=i[d];0!==o[r]&&(n=!1)}n&&(s.splice(t--,1),e=a(a.s=i[0]))}return e}var n={},o={app:0},s=[];function a(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=n,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var d=window["webpackJsonp"]=window["webpackJsonp"]||[],r=d.push.bind(d);d.push=t,d=d.slice();for(var l=0;l<d.length;l++)t(d[l]);var u=r;s.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"034f":function(e,t,i){"use strict";i("85ec")},3776:function(e,t,i){},"46b8":function(e,t,i){"use strict";i("3776")},"56d7":function(e,t,i){"use strict";i.r(t);var n={};i.r(n),i.d(n,"setCurrent",(function(){return l})),i.d(n,"setSearchKeyword",(function(){return u}));var o={};i.r(o),i.d(o,"getCurrent",(function(){return c})),i.d(o,"getSearchKeyword",(function(){return p}));i("e260"),i("e6cf"),i("cca6"),i("a79d");var s=i("2b0e"),a=i("8c4f"),d=i("f6dd"),r=i("2f62"),l=function(e,t){e.commit("SET_CURRENT",t)},u=function(e,t){e.commit("SET_SEARCH_KEYWORD",t)},c=function(e){return e.currentId},p=function(e){return e.keyword},v={SET_CURRENT:function(e,t){e.currentId=t},SET_SEARCH_KEYWORD:function(e,t){e.keyword=t}};s["a"].use(r["a"]);var f={currentId:null,keyword:null},h=new r["a"].Store({actions:n,getters:o,mutations:v,state:f}),y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("h1",{staticClass:"subtitle has-text-centered"},[e._v(" Music Player ")]),e.playing?i("MediaPlayer",{attrs:{video:e.video,playlist:e.playlist}}):e._e(),i("div",{staticClass:"tabs is-centered"},[i("ul",[i("li",[i("router-link",{attrs:{to:"/music"}},[e._v("Musics")])],1),e._v(" "),i("li",[i("router-link",{attrs:{to:"/playlist"}},[e._v("Playlist")])],1)])]),i("router-view")],1)},m=[],g=(i("4160"),i("159b"),i("8e27")),w=i.n(g),_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"MediaPlayer__wrapper"},[i("youtube",{attrs:{"video-id":this.video.id,"player-vars":{autoplay:1},"player-width":"100%"},on:{ready:e.ready,ended:e.ended}}),e.playlist?i("div",{staticClass:"buttons is-centered"},[i("button",{staticClass:"button is-left",on:{click:e.prevVideo}},[i("i",{staticClass:"fa fa-lg fa-arrow-left"})]),i("button",{staticClass:"button is-right",on:{click:e.nextVideo}},[i("i",{staticClass:"fa fa-lg fa-arrow-right"})])]):e._e()],1)},b=[],x={props:["video","playlist"],data:function(){return{fromPlaylist:!1,player:null}},mounted:function(){window.eventBus.$on("playMedia",this.play),window.eventBus.$on("pauseMedia",this.pause)},methods:{prevVideo:function(){window.eventBus.$emit("playPrev")},nextVideo:function(){window.eventBus.$emit("playNext")},ready:function(e){this.player=e.target,this.$store.dispatch("setCurrent",this.video._id)},play:function(){this.player.playVideo()},pause:function(){this.player.pauseVideo()},ended:function(){this.playlist&&window.eventBus.$emit("playNext")}}},C=x,$=i("2877"),V=Object($["a"])(C,_,b,!1,null,null,null),B=V.exports,I=i("bc3a"),k="https://music-chatbot-api.herokuapp.com/playlist",S=function(e){I.get(k).then((function(t){e&&e(t.data)})).catch((function(e){return console.error(e.message)}))},P=function(e,t){I.get("".concat(k,"/").concat(e)).then((function(e){t&&t(e.data)})).catch((function(e){return console.error(e.message)}))},K=function(e,t){var i={index:e.index,prev:e.prev?e.prev:null,videoId:e.videoId,next:e.next?e.next:null};I.post(k,{params:i}).then((function(e){t&&t(e.data)})).catch((function(e){return console.error(e.message)}))},A=function(e,t){var i={index:e.index,prev:e.prev?e.prev:null,videoId:e.videoId,next:e.next?e.next:null};I.patch("".concat(k,"/").concat(e._id),{params:i}).then((function(e){t&&t(e.data)})).catch((function(e){return console.error(e.message)}))},E=function(e,t){I.delete("".concat(k,"/").concat(e)).then((function(e){t&&t(e.data)})).catch((function(e){return console.error(e.message)}))},O=function(e){I.delete("".concat(k,"/")).then((function(t){e&&e(t.data)})).catch((function(e){return console.error(e.message)}))},L={name:"App",components:{MediaPlayer:B},data:function(){return{socket:{},video:null,playing:!1,playlist:!1}},created:function(){var e=this,t=this;t.socket=w()("https://music-chatbot-api.herokuapp.com"),t.socket.on("play",(function(t){e.handlePlaying({video:{id:t.playlist?t.id:t.id.videoId,_id:t._id},playlist:t.playlist,status:t.status})})),t.socket.on("next",(function(){window.eventBus.$emit("playNext")})),t.socket.on("prev",(function(){window.eventBus.$emit("playPrev")})),t.socket.on("playMedia",(function(){window.eventBus.$emit("playMedia")})),t.socket.on("pauseMedia",(function(){window.eventBus.$emit("pauseMedia")})),t.socket.on("addToList",(function(t){e.addToList(t)})),t.socket.on("updateList",(function(t){e.updateList(t)})),t.socket.on("deleteVideo",(function(e){window.eventBus.$emit("deleteVideo",e)}))},mounted:function(){window.eventBus.$on("playing",this.handlePlaying),window.eventBus.$on("addToList",this.addToList),window.eventBus.$on("updateList",this.updateList)},methods:{handlePlaying:function(e){var t=this;e.status?t.$store.dispatch("setCurrent",e.video._id):t.$store.dispatch("setCurrent",null),t.video=e.video,t.playlist=e.playlist,t.playing=e.status},addToList:function(e){var t=this;S((function(i){var n=i.length,o=n>0?i[n-1]:null;n>0?K({index:o.index+1,prev:null!=o?o._id:null,videoId:e.id.videoId,next:null},(function(e){t.playing||t.handlePlaying({video:{id:e.videoId,_id:e._id},playlist:!0,status:!0}),A({_id:o._id,index:o.index,prev:o.prev,videoId:o.videoId,next:e._id},(function(){window.eventBus.$emit("fetchAllVideos")}))})):K({index:n+1,prev:null!=o?o._id:null,videoId:e.id.videoId,next:null},(function(e){t.playing||t.handlePlaying({video:{id:e.videoId,_id:e._id},playlist:!0,status:!0}),window.eventBus.$emit("fetchAllVideos")}))}))},updateList:function(e){var t=e.length;t>1&&e.forEach((function(i,n){A({_id:i._id,index:n+1,prev:0==n?null:e[n-1]._id,videoId:i.videoId,next:n+1<t?e[n+1]._id:null},(function(){window.eventBus.$emit("fetchAllVideos")}))}))}}},T=L,j=(i("034f"),Object($["a"])(T,y,m,!1,null,null,null)),M=j.exports,R=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"YoutubeDash__wrapper"},[i("Finder"),e.loading?i("div",[e._v(" Loading... ")]):i("div",{staticClass:"container"},[i("VideoGroup",{attrs:{videos:e.videos}})],1)],1)},Y=[],W=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"VideoGroup__wrapper"},e._l(e.videos,(function(e){return i("VideoItem",{key:e.id.videoId,attrs:{video:e}})})),1)},N=[],q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("dir",{staticClass:"VideoItem__wrapper"},[i("div",{staticClass:"card"},[i("div",{staticClass:"card-image"},[i("figure",{staticClass:"image is-4by3"},[i("img",{attrs:{src:e.video.snippet.thumbnails.high.url,alt:"Placeholder image"}})])]),i("div",{staticClass:"card-content"},[i("div",{staticClass:"media"},[i("div",{staticClass:"media-left"},[i("figure",{staticClass:"image is-48x48"},[i("img",{attrs:{src:e.video.snippet.thumbnails.default.url,alt:"Placeholder image"}})])]),i("div",{staticClass:"media-content"},[i("p",{staticClass:"title is-4"},[e._v(e._s(e.video.snippet.title))]),i("p",{staticClass:"subtitle is-6"},[e._v(e._s(e.video.snippet.channelTitle))])])]),i("div",{staticClass:"content"},[e._v(" "+e._s(e.video.snippet.description)+" ")])]),i("footer",{staticClass:"card-footer"},[i("a",{staticClass:"card-footer-item",attrs:{href:"#"},on:{click:e.openVideo}},[e._v("Play")]),i("a",{staticClass:"card-footer-item",attrs:{href:"#"},on:{click:e.addToList}},[e._v("Add to List")])])])])},D=[],H={props:["video"],methods:{openVideo:function(){window.eventBus.$emit("playing",{video:{id:this.video.id.videoId},playlist:!1,status:!0})},addToList:function(){window.eventBus.$emit("addToList",this.video)}}},U=H,z=(i("79e4"),Object($["a"])(U,q,D,!1,null,null,null)),X=z.exports,G={props:["videos"],components:{VideoItem:X}},F=G,J=Object($["a"])(F,W,N,!1,null,null,null),Q=J.exports,Z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"field has-addons"},[i("div",{staticClass:"control is-expanded"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.searching,expression:"searching"}],staticClass:"input",attrs:{type:"text",placeholder:"Search something..."},domProps:{value:e.searching},on:{keydown:e.handleKeyDown,input:function(t){t.target.composing||(e.searching=t.target.value)}}})]),i("div",{staticClass:"control"},[i("a",{staticClass:"button is-info",attrs:{disabled:!e.searching},on:{click:e.doSearch}},[e._v("Search")])])])},ee=[],te=i("bc3a"),ie="https://www.googleapis.com/youtube/v3/search",ne="https://www.googleapis.com/youtube/v3/videos",oe=function(e,t){if(!e.apiKey)throw new Error("Youtube search would require a key.");var i={part:"snippet",key:e.apiKey,q:e.term,maxResults:e.items?e.items:5,type:"video"};te.get(ie,{params:i}).then((function(e){t&&t(e.data.items)})).catch((function(e){return console.error(e)}))},se=function(e,t){if(!e.apiKey)throw new Error("Youtube search would require a key.");var i={part:"snippet",key:e.apiKey,id:e.videoId};te.get(ne,{params:i}).then((function(e){t&&t(e.data.items)})).catch((function(e){return console.error(e)}))},ae={data:function(){return{searching:""}},created:function(){var e=this.$store.getters.getSearchKeyword;null!=e&&(this.searching=e,this.doSearch())},methods:{handleKeyDown:function(e){"Enter"===e.key&&this.searching&&this.doSearch()},doSearch:function(){this.loading(),this.$store.dispatch("setSearchKeyword",this.searching),oe({apiKey:"AIzaSyB7nVWeBSxb7HC7U3i5SKe6KqXsu8WbcdY",term:this.searching,items:10},(function(e){return window.eventBus.$emit("searchResult",e)}))},loading:function(){window.eventBus.$emit("loading",!0)}}},de=ae,re=Object($["a"])(de,Z,ee,!1,null,null,null),le=re.exports,ue={components:{VideoGroup:Q,Finder:le},mounted:function(){window.eventBus.$on("loading",this.handleLoading),window.eventBus.$on("searchResult",this.handleYoutubeVideos)},created:function(){},data:function(){return{videos:null,loading:!1}},methods:{handleYoutubeVideos:function(e){this.videos=e,this.loading=!1},handleLoading:function(e){this.loading=e}}},ce=ue,pe=Object($["a"])(ce,R,Y,!1,null,null,null),ve=pe.exports,fe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"Playlist__wrapper"},[i("table",{attrs:{width:"100%"}},[i("tr",[i("td",[e.videos.length>0?i("a",{staticClass:"is-pulled-right mb-3",attrs:{href:"#"},on:{click:e.deleteAll}},[e._v(" Delete All ")]):e._e()])]),i("tr",[i("td",[e.videos.length>0?i("draggable",{staticClass:"list-group",attrs:{list:e.videos,"ghost-class":"ghost"},on:{end:e.dropItem}},e._l(e.videos,(function(e){return i("div",{key:e.id,staticClass:"list-group-item"},[i("PlaylistVideo",{attrs:{video:e}})],1)})),0):i("div",[e._v(" Add some videos. ")])],1)])])])},he=[],ye=(i("d81d"),i("d3b7"),i("25f0"),i("b76a")),me=i.n(ye),ge=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("article",{staticClass:"media"},[i("figure",{staticClass:"media-left"},[i("p",{staticClass:"image is-64x64"},[i("img",{attrs:{src:e.video.snippet.thumbnails.default.url}})])]),i("div",{staticClass:"media-content"},[i("div",{staticClass:"content"},[i("p",[i("strong",{staticClass:"video-title",on:{click:e.playVideo}},[e._v(e._s(e.video.snippet.title))])])])]),i("div",{staticClass:"media-right"},[i("button",{staticClass:"delete",on:{click:e.deleteVideo}})])])},we=[],_e={props:["video"],data:function(){return{prevVideo:null,nextVideo:null}},methods:{deleteVideo:function(){window.eventBus.$emit("deleteVideo",this.video)},playVideo:function(){var e=this;window.eventBus.$emit("playing",{video:e.video,playlist:!0,status:!0})}}},be=_e,xe=(i("f8bd"),Object($["a"])(be,ge,we,!1,null,null,null)),Ce=xe.exports,$e={components:{PlaylistVideo:Ce,draggable:me.a},data:function(){return{videos:[]}},mounted:function(){var e=this;window.eventBus.$on("playPrev",e.handlePlayPrev),window.eventBus.$on("playNext",e.handlePlayNext),window.eventBus.$on("fetchAllVideos",e.fetchAllVideos),window.eventBus.$on("deleteVideo",e.deleteVideo)},created:function(){this.fetchAllVideos()},methods:{deleteVideo:function(e){var t=this;P(e._id,(function(i){var n=null,o=null,s=t.$store.getters.getCurrent;s==i._id&&window.eventBus.$emit("playing",{video:null,playlist:!1,status:!1}),null!=i.prev&&P(i.prev,(function(e){n=e,A({_id:n._id,index:n.index,prev:n.prev,videoId:n.videoId,next:i.next})})),null!=i.next&&P(i.next,(function(e){o=e,A({_id:o._id,index:o.index,prev:i.prev,videoId:o.videoId,next:o.next})})),E(e._id,(function(){t.fetchAllVideos()}))}))},deleteAll:function(){var e=this;O((function(){return e.fetchAllVideos()}))},dropItem:function(){window.eventBus.$emit("updateList",this.videos)},fetchAllVideos:function(){var e=this;S((function(t){if(t.length>0){var i=t.map((function(e){return e.videoId}));se({apiKey:"AIzaSyB7nVWeBSxb7HC7U3i5SKe6KqXsu8WbcdY",videoId:i.toString()},(function(i){e.videos=i,e.videos.forEach((function(e,i){e._id=t[i]._id,e.index=t[i].index}))}))}else e.videos=[]}))},handlePlayPrev:function(){var e=this;if(e.fetchAllVideos(),e.videos.length>0){var t=e.$store.getters.getCurrent;if(null==t)return;P(t,(function(e){null!=e.prev&&P(e.prev,(function(e){se({apiKey:"AIzaSyB7nVWeBSxb7HC7U3i5SKe6KqXsu8WbcdY",videoId:e.videoId},(function(t){t[0]._id=e._id,t[0].index=e.index,window.eventBus.$emit("playing",{video:t[0],playlist:!0,status:!0})}))}))}))}},handlePlayNext:function(){var e=this,t=this;if(t.fetchAllVideos(),t.videos.length>0){var i=t.$store.getters.getCurrent;if(null==i)return;P(i,(function(t){null!=t.next?P(t.next,(function(t){se({apiKey:"AIzaSyB7nVWeBSxb7HC7U3i5SKe6KqXsu8WbcdY",videoId:t.videoId},(function(i){e.$store.dispatch("setCurrent",t._id),i[0]._id=t._id,i[0].index=t.index,window.eventBus.$emit("playing",{video:i[0],playlist:!0,status:!0})}))})):window.eventBus.$emit("playing",{video:{id:null,_id:null},playlist:!1,status:!1})}))}}}},Ve=$e,Be=(i("46b8"),Object($["a"])(Ve,fe,he,!1,null,"7063e686",null)),Ie=Be.exports;s["a"].use(d["a"],{global:!0}),s["a"].use(a["a"]),s["a"].config.productionTip=!1;var ke=[{path:"/",component:Ie},{path:"/music",component:ve},{path:"/playlist",component:Ie}],Se=new a["a"]({routes:ke});window.eventBus=new s["a"]({}),new s["a"]({render:function(e){return e(M)},router:Se,store:h}).$mount("#app")},6201:function(e,t,i){},"769b":function(e,t,i){},"79e4":function(e,t,i){"use strict";i("769b")},"85ec":function(e,t,i){},f8bd:function(e,t,i){"use strict";i("6201")}});
//# sourceMappingURL=app.323cbe67.js.map